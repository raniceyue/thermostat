{"version":3,"sources":["util/ThermostatStates.js","util/ThermostatController.js","util/utils.js","components/Border.jsx","components/TemperatureText.jsx","components/Face.jsx","components/Slider.jsx","components/CurrentTempController.jsx","components/Thermostat.jsx","App.js","index.js"],"names":["ThermostatStates","Machine","id","initial","states","IDLE","on","TEMP_TOO_HOT","TEMP_TOO_COLD","COOLING","TEMP_OK","HEATING","ThermostatController","dT","dTcool","dTheat","this","mode","Tc","Tt","status","cooling","heating","idle","Th","Tl","polarToCartesian","centerX","centerY","radius","degrees","radians","Math","PI","x","cos","y","sin","drawArc","startAngle","endAngle","start","end","largeArcFlag","join","Border","arc1","arc2","className","viewBox","xmlns","cx","cy","r","offset","stroke","d","TemperatureText","Face","useState","faceClass","setFaceClass","onModeChange","useCallback","useEffect","Slider","handleTtChange","onMouseUp","e","console","log","document","removeEventListener","onMouseMove","querySelector","getBoundingClientRect","left","top","mx","pageX","my","pageY","angle","atan2","value","round","onScrollUp","onScrollDown","slider","getElementsByClassName","addEventListener","onMouseDown","onWheel","scrollUp","CustomEvent","scrollDown","deltaY","dispatchEvent","onScroll","CurrentTempController","minTc","maxTc","handleTcChange","htmlFor","type","onChange","target","min","max","Thermostat","parseInt","setTt","setTc","useMachine","current","send","controller","regulateTemp","msg","getStatus","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6b693361.chunk.js","sourcesContent":["import { Machine } from 'xstate';\r\n\r\nexport const ThermostatStates = Machine({\r\n    id: 'mode',\r\n    initial: 'IDLE',\r\n    states: {\r\n      IDLE: {\r\n        on: {\r\n          TEMP_TOO_HOT: 'COOLING',\r\n          TEMP_TOO_COLD: 'HEATING'\r\n        }\r\n      },\r\n      COOLING: {\r\n        on: {\r\n          TEMP_OK: 'IDLE'\r\n        }\r\n      },\r\n      HEATING: {\r\n        on: {\r\n          TEMP_OK: 'IDLE'\r\n        }\r\n      }\r\n    }\r\n});","/**\r\n * Util class for controlling thermostat temperature\r\n * Based on example scenario\r\n */\r\n\r\nclass ThermostatController {\r\n\r\n    constructor(dT, dTcool, dTheat) {\r\n        this.dT = dT;\r\n        this.dTcool = dTcool;\r\n        this.dTheat = dTheat;\r\n    }\r\n\r\n    /**\r\n     * Function to get status of thermostat based on temperature changes\r\n     */\r\n    getStatus(mode, Tc, Tt) {\r\n        var status;\r\n        switch(mode) {\r\n            case 'COOLING':\r\n                status = this.cooling(Tc, Tt);\r\n                break;\r\n            case 'HEATING':\r\n                status = this.heating(Tc, Tt);\r\n                break;\r\n            case 'IDLE':\r\n                status = this.idle(Tc, Tt);\r\n                break;\r\n            default:\r\n        }\r\n        return status;\r\n    }\r\n\r\n\r\n    /**\r\n     * In the IDLE state\r\n     *  2. Temperature rises and gets too hot with Tc = Tt + this.dT + this.dTcool\r\n     *  7. Temperature drops until too cold, i.e. Tc = Tt - this.dT - this.dTheat\r\n     */\r\n    idle(Tc, Tt) {\r\n        var Th = Tt + this.dT + this.dTcool;   // Upper bound\r\n        var Tl = Tt - this.dT - this.dTheat;   // Lower bound\r\n        if (Tc > Th) {\r\n            return \"TEMP_TOO_HOT\";\r\n        }\r\n\r\n        if (Tc < Tl) {\r\n            return \"TEMP_TOO_COLD\";\r\n        }\r\n\r\n        if (Tc >= Tl && Tc <= Th) {   // In the middle of upper and lower bound\r\n            return \"MAINTAIN\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * In the COOLING state\r\n     *  3. Temperature drops until a little too cold i.e. Tc = Tt - this.dT\r\n     */\r\n    cooling(Tc, Tt) {\r\n        var TStop = Tt + (this.dT - this.dTcool);\r\n\r\n        if (Tc < TStop) {   // Little too cold\r\n            return \"TEMP_OK\";\r\n        } else {\r\n            return \"MAINTAIN\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * In the HEATING state\r\n     *  9. Temperature rises until a little too hot, i.e. Tc = Tt + this.dT\r\n     */\r\n    heating(Tc, Tt) {\r\n        var TStop = Tt - this.dT - this.dTheat;\r\n\r\n        if (Tc > TStop) {   // Little too hot\r\n            return \"TEMP_OK\";\r\n        } else {\r\n            return \"MAINTAIN\";\r\n        }\r\n    }\r\n}\r\n\r\nexport default ThermostatController;\r\n","/**\r\n * File for all general helper functions\r\n */\r\n\r\n// Helper function to convert polar co-ordinates to cartesian co-ordinates\r\nfunction polarToCartesian(centerX, centerY, radius, degrees) {\r\n    var radians = (degrees - 90) * Math.PI / 180.0;\r\n  \r\n    return {\r\n      x: centerX + (radius * Math.cos(radians)),\r\n      y: centerY + (radius * Math.sin(radians))\r\n    };\r\n}\r\n\r\n// Helper function for creating d attribute for path for circle arcs \r\n// Reference: https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths\r\nexport function drawArc(x, y, radius, startAngle, endAngle){\r\n\r\n    var start = polarToCartesian(x, y, radius, endAngle);\r\n    var end = polarToCartesian(x, y, radius, startAngle);\r\n\r\n    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\r\n\r\n    var d = [ \"M\", start.x, start.y, \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y ].join(\" \");\r\n\r\n\t// debug console.log(d);\r\n    return d;       \r\n}","import React from 'react';\r\nimport './Border.css';\r\nimport { drawArc } from '../util/utils.js';\r\n\r\n/**\r\n * Component for thermostat border\r\n */\r\nconst Border = () => {\r\n\r\n    /**\r\n     * d values for the arc SVGs\r\n     */\r\n    const arc1 = drawArc(50, 50, 43, -130, 130);\r\n    const arc2 = drawArc(50, 50, 43, 130, 230);\r\n\r\n    return(\r\n        <>\r\n        <div className=\"thermostat-border\">\r\n            <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                {/* BORDER */}\r\n                <circle cx=\"50%\" cy=\"50%\" r=\"50\" className=\"svg-thermo-outer-border\"/>\r\n                <circle cx=\"50%\" cy=\"50%\" r=\"47\" className=\"svg-thermo-inner-border\"/>\r\n                \r\n                {/* ARC AROUND FACE */}\r\n                <defs>\r\n                    <linearGradient id=\"myGradient\" /*gradientTransform=\"rotate(90)\"*/>\r\n                        <stop className=\"svg-arc-cooling\" offset=\"30%\"/>\r\n                        <stop className=\"svg-arc-heating\" offset=\"70%\"/>\r\n                    </linearGradient>\r\n                </defs>\r\n                <path className=\"svg-arc\" stroke=\"url('#myGradient')\" d={arc1}/>\r\n                <path className=\"svg-arc svg-arc-bottom\" d={arc2}/>\r\n            </svg>\r\n        </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Border;","import React from 'react';\r\nimport './TemperatureText.css';\r\n\r\n/**\r\n * Component for text on thermostat face \r\n */\r\nconst TemperatureText = ({Tt, Tc}) => {\r\n    return(\r\n        <>\r\n        <text x=\"50%\" y=\"55%\" className=\"thermo-temp-text\">{ Tt }</text>\r\n        <text x=\"50%\" y=\"65%\" className=\"thermo-curr-temp-text\">Current: { Tc }</text>        \r\n        </>\r\n    );\r\n}\r\n\r\nexport default TemperatureText;","import React, { useCallback, useEffect, useState } from 'react';\r\nimport './Face.css';\r\n\r\nimport TemperatureText from './TemperatureText.jsx';\r\n\r\n/**\r\n * Component for thermostat face, contains\r\n * - ThermostatText\r\n * - The sun icon as an SVG path\r\n */\r\nconst Face = ({Tt, Tc, mode}) => {\r\n\t\r\n    /**\r\n     * Class of the circle SVG representing the face of thermostat is set as the state of the Face component\r\n     * Data bound to the className attribute of the circle SVG\r\n     */\r\n    const [faceClass, setFaceClass] = useState('svg-thermo-face-idle');\r\n\r\n    /**\r\n     * When the mode changes, based on the mode, the class of the \r\n     * circle element representing the face will change and this helps\r\n     * to facilitate the transition effect\r\n     */\r\n    const onModeChange = useCallback((mode) => {\r\n        if (mode === 'COOLING') {\r\n            setFaceClass('svg-thermo-face-cooling');\r\n        }  \r\n        \r\n        if (mode === 'HEATING') {\r\n            setFaceClass('svg-thermo-face-heating');\r\n        } \r\n\r\n        if (mode === 'IDLE') {\r\n            setFaceClass('svg-thermo-face-idle');\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * Whenever the mode changes, onModeChange is called to change thermostat face accordingly\r\n     */\r\n    useEffect(() => {\r\n        onModeChange(mode);\r\n    }, [onModeChange, mode]);\r\n\r\n    return(\r\n\t\t<div className=\"thermostat-face\">\r\n            <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <circle id='svg-thermo-face' \r\n                        className={ faceClass }\r\n                        cx=\"50%\" cy=\"50%\" r=\"42.1\"/>\r\n                \r\n                <TemperatureText Tt={Tt} Tc={Tc} />\r\n\r\n                {/* SUN ICON, taken from material icons https://material.io/icons/ */}\r\n                <path className=\"svg-sun-icon\"\r\n                    d=\"M12, 9c1.65, 0, 3, 1.35, 3, 3s-1.35, 3-3, 3s-3-1.35-3-3 S10.35, 9, 12, 9 \r\n                        M12, 7c-2.76, 0-5, 2.24-5, 5s2.24, 5, 5, 5s5-2.24, 5-5 S14.76, 7, 12, 7L12, 7z \r\n                        M2, 13l2, 0c0.55, 0, 1-0.45, 1-1s-0.45-1-1-1l-2, 0c-0.55, 0-1,0.45-1, 1S1.45,13,2, 13z \r\n                        M20, 13l2, 0c0.55, 0, 1-0.45, 1-1 s-0.45-1-1-1l-2, 0c-0.55, 0-1, 0.45-1, 1S19.45, 13, 20, 13z \r\n                        M11, 2v2c0, 0.55, 0.45, 1, 1, 1s1-0.45, 1-1V2c0-0.55-0.45-1-1-1S11, 1.45, 11, 2z \r\n                        M11, 20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45, \r\n                        19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,\r\n                        0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03, 0-1.41L5.99,4.58z \r\n                        M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39, 1.03,0,\r\n                        1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03, 0-1.41 \r\n                        L18.36,16.95z \r\n                        M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,\r\n                        0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z \r\n                        M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,\r\n                        0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z\"\r\n                />\r\n            </svg>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Face;","import React, { useCallback, useEffect } from 'react';\r\nimport './Slider.css';\r\nimport { drawArc } from '../util/utils.js';\r\n\r\nconst Slider = ({Tt, handleTtChange}) => {\r\n\r\n    /**\r\n     * When user's left mouse button down on the slider, start detecting for\r\n     * - Mouse movement\r\n     * - Event where mouse button up\r\n     */\r\n    const onMouseDown = (e) => {\r\n        console.log(\"MOUSE DOWN: Adding mouse event listeners for slider\");\r\n        document.addEventListener(\"mousemove\", onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    }\r\n    \r\n    /**\r\n     * When user's left mouse button is no longer down on slider, stop detecting for\r\n     * - Mouse movement\r\n     * - Event where mouse button up\r\n     */\r\n    const onMouseUp = (e) => {\r\n        console.log(\"MOUSE UP: Removing mouse event listeners for slider\");\r\n        document.removeEventListener(\"mousemove\", onMouseMove);\r\n        document.removeEventListener('mouseup', onMouseUp);\r\n    }\r\n\r\n    /**\r\n     * Handlers for scrolling\r\n     */\r\n    const onScroll = (e) => {\r\n        let slider = document.getElementsByClassName(\"slider\")[0];\r\n\r\n        let scrollUp = new CustomEvent(\"scrollUp\");\r\n        let scrollDown = new CustomEvent(\"scrollDown\");\r\n        \r\n        if (e.deltaY < 0) {\r\n            slider.dispatchEvent(scrollUp);\r\n        } else {\r\n            slider.dispatchEvent(scrollDown);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle mouse down + mouse move events\r\n     * \r\n     * Uses trigonometry to calculate the bearing of the cursor WRT thermostat\r\n     * \r\n     * References\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\r\n     * https://math.stackexchange.com/questions/1596513/find-the-bearing-angle-between-two-points-in-a-2d-space\r\n     */\r\n    const onMouseMove = (e) => {\r\n        var cx = document.querySelector('.origin').getBoundingClientRect().left // Distance from left of origin to left of viewport\r\n        var cy = document.querySelector('.origin').getBoundingClientRect().top; // Distance from top of origin to top of viewport\r\n\r\n        var mx = e.pageX;   // x-coordinate of mouse\r\n        var my = e.pageY;   // y-coordinate of mouse\r\n\r\n        var angle = Math.atan2(mx - cx, -(my - cy)) * (180 / Math.PI); // Bearing of cursor in degrees\r\n        var value = Math.round(65 + Math.round(angle / 10));\r\n\r\n        handleTtChange(value);\r\n    };\r\n\r\n    /**\r\n     * Event handlers for custom scrollUp and scrollDown events\r\n     * Increments or deprements value of Tt accordingly\r\n     */\r\n    const onScrollUp = useCallback((e) => {\r\n        handleTtChange(Tt + 1);\r\n    }, [Tt, handleTtChange]);\r\n\r\n    const onScrollDown = useCallback((e) => {\r\n        handleTtChange(Tt - 1);\r\n    }, [Tt, handleTtChange]);\r\n\r\n    /**\r\n     * Same as componentDidUpdate and componentDidMount\r\n     * Event listeners for custom events added when component mounts\r\n     * When component unmounts, event listeners are removed\r\n     * \r\n     * Reference\r\n     * https://reactjs.org/docs/hooks-effect.html\r\n     */\r\n    useEffect(() => {\r\n        let slider = document.getElementsByClassName(\"slider\")[0];\r\n        slider.addEventListener(\"scrollUp\", onScrollUp);\r\n        slider.addEventListener(\"scrollDown\", onScrollDown);\r\n        \r\n        return function removeEventListeners() {\r\n            slider.removeEventListener(\"scrollUp\", onScrollUp);\r\n            slider.removeEventListener(\"scrollDown\", onScrollDown);\r\n        };\r\n    }, [onScrollUp, onScrollDown]);\r\n\r\n    return(\r\n        <>\r\n            <div className=\"slider\"\r\n                onMouseDown={e => onMouseDown(e)}\r\n                onWheel={e => onScroll(e)}>\r\n                <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path className=\"slider-marks\" d={drawArc(50, 50, 37, -150, 150)}/>\r\n                </svg>        \r\n            </div>\r\n            <div className=\"origin\"></div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Slider;\r\n\r\n","import React from 'react';\r\nimport './CurrentTempController.css';\r\n\r\n/**\r\n * Component for testing controls, controls current temperature\r\n */\r\nconst CurrentTempController = ({minTc, maxTc, Tc, handleTcChange}) => {\r\n    return(\r\n        <>\r\n            <label htmlFor=\"tc-input-text\">Set Current Temperature </label>\r\n            <input \r\n                type=\"number\" \r\n                id=\"tc-input-text\" \r\n                value={Tc} \r\n                onChange={e => handleTcChange(e.target.value)}/>\r\n            <input \r\n                type=\"range\" \r\n                id=\"tc-input-range\"\r\n                min={ minTc } \r\n                max={ maxTc } \r\n                value={ Tc } \r\n                onChange={e => handleTcChange(e.target.value)}/>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default CurrentTempController;","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useMachine } from '@xstate/react';\r\n\r\nimport './Thermostat.css';\r\nimport { ThermostatStates } from '../util/ThermostatStates.js';\r\nimport ThermostatController from '../util/ThermostatController.js';\r\nimport Border from './Border.jsx';\r\nimport Face from './Face.jsx';\r\nimport Slider from './Slider.jsx';\r\nimport CurrentTempController from './CurrentTempController';\r\n\r\n/**\r\n * Main thermostat component containing all sub-components that make up the thermostat\r\n * The states Tt and Tc are the main sources of truth for the target and current temperature\r\n * Any changes in the values of Tt and Tc created by other components call the \r\n * handleTtChange and handleTcChange functions which will modify the states\r\n * \r\n * Based on the change in Tt/Tc, status of the thermostat is checked using the ThermostatController\r\n * object (business logic of thermostat), and based on the status received, will send a message to\r\n * the service (state machine) which will change the state of the thermostat accordingly\r\n */\r\nconst Thermostat = () => {\r\n\t/**\r\n\t * Test variables\r\n\t */\r\n\tconst minTt = 50;\r\n\tconst maxTt = 80;\r\n\r\n\tconst minTc = 32;\r\n\tconst maxTc = 100;\r\n\r\n\tconst dT = 2;\r\n\tconst dTcool = 1.5;\r\n\tconst dTheat = 1;\r\n\r\n\t/**\r\n\t * Component state\r\n\t */\r\n\tconst [Tt, setTt] = useState(parseInt(72));\t// Range: 50 - 80\r\n\tconst [Tc, setTc] = useState(parseInt(72));\t// Range: 32 - 100\r\n\tconst [current, send] = useMachine(ThermostatStates);\r\n\r\n\tlet controller = new ThermostatController(dT, dTcool, dTheat);\t// Object with all the business logic\r\n\r\n\t/**\r\n\t * Callback functions passed to sub-components to handle temp changes \r\n\t * Used in sub-component CurrentTempController (for changing Tc, current temperature)\r\n\t * Used in sub-component Slider (for changing Tt, target temperature)\r\n\t */\r\n\tconst handleTcChange = (value) => {\r\n\t\tif (value >= minTc && value <= maxTc) {\r\n\t\t\tsetTc(value);\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleTtChange = (value) => {\r\n\t\tif (value >= minTt && value <= maxTt) {\r\n\t\t\tsetTt(value);\r\n\t\t\tconsole.log('Tt received by slider: ' + value + '\\nNew Tt value: ' + Tt);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Function for regulating temperature\r\n\t * State change according to status received by the business logic object\r\n\t */\r\n\tconst regulateTemp = useCallback(() => {\r\n\t\tvar msg = controller.getStatus(current.value, Tc, Tt);\r\n\t\tif (msg !== 'MAINTAIN') send(msg); \r\n\t\tconsole.log(msg);\r\n\t}, [Tc, Tt, controller, current.value, send]);\r\n\r\n\t/**\r\n\t * Whenever Tt or Tc changes, call regulateTemp()\r\n\t */\r\n\tuseEffect(() => { \r\n\t\tregulateTemp();\r\n\t}, [Tt, Tc, regulateTemp]);\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<div className=\"thermostat\">\r\n\t\t\t\t<div className=\"thermostat-container\">\r\n\t\t\t\t\t<Border/>\r\n\r\n\t\t\t\t\t<Face \r\n\t\t\t\t\t\tTt={Tt} \r\n\t\t\t\t\t\tTc={Tc}\r\n\t\t\t\t\t\tmode={current.value}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Slider \r\n\t\t\t\t\t\tTt={Tt} \r\n\t\t\t\t\t\thandleTtChange={handleTtChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"control-container\">\r\n\t\t\t\t\t<CurrentTempController \r\n\t\t\t\t\t\tminTc={minTc}\r\n\t\t\t\t\t\tmaxTc={maxTc}\r\n\t\t\t\t\t\tTc={Tc}\r\n\t\t\t\t\t\thandleTcChange={handleTcChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n    );\r\n}\r\n\r\nexport default Thermostat;","import './index.css';\nimport Thermostat from './components/Thermostat';\n\nfunction App() {\n  return (\n    <Thermostat/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}